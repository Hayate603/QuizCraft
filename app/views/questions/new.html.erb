<% if @question.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@question.errors.count, "error") %> prohibited this question from being saved:</h2>
    <ul>
      <% @question.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with model: [@quiz, @question], local: true, data: { turbo: false } do |form| %>
  <div class="field">
    <%= form.label :question_text, "質問テキスト" %>
    <%= form.text_area :question_text %>
  </div>

  <div class="field">
    <%= form.label :correct_answer, "正解" %>
    <%= form.text_field :correct_answer %>
  </div>

  <div class="actions">
    <%= form.submit "質問を作成" %>
  </div>
<% end %>

<h2>画像から質問を自動生成</h2>

<%= form_with url: generate_from_image_quiz_questions_path(@quiz), local: true, multipart: true, data: { turbo: false }, id: 'image-upload-form' do |form| %>
  <div class="field">
    <%= form.label :image, '画像をアップロードしてください' %>
    <%= form.file_field :image %>
  </div>

  <div class="actions">
    <%= form.submit 'アップロード', class: 'btn btn-primary' %>
  </div>
<% end %>

<div id="generated-questions">
  <!-- ここに生成された質問が表示されます -->
</div>
